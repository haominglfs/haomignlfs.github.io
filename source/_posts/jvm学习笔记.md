---
title: jvm学习笔记
date: 2017-06-17 17:06:38
tags:
    - jvm
categories:
    - 读书笔记
---
java虚拟机与程序的生命周期
----------------
在如下几种情况下，java虚拟机将结束生命周期：

* 执行了System.exit()方法

* 程序正常执行结束

* 程序在执行过程中遇到了异常或错误而异常终止

* 由于操作系统出现错误而导致java虚拟机进程结束

  <!--more-->

类的加载、链接与初始化
----------------


* 加载:查找并加载类的二进制数据，就是将类的.class文件中的二进制数据读入到内存中，将其放在运行时数据区的方法区内，然后在堆区创建一个java.lang.Class对象，用来封装类在方法区内的数据结构，Class对象封装了类在方法区内的数据结构，并且向java程序员提供了访问方法区内的数据结构的接口
* 链接:  
  1. 验证：确保被加载的类的正确性
  2. 准备:为类的**静态变量**分配内存，并将其初始化为默认值
  3. 解析:把类中的符号引用转变为直接引用

* 初始化：为类的静态变量赋予正确的初始值

java程序对类的使用方式分为两种:
-----------------
1. 主动使用(六种):
	* 创建类的实例
	* 访问某个类或接口的静态变量，或者对该静态变量赋值
	* 调用类的静态方法
	* 反射(如 Class.forName("info.haominglfs.test"))
	* 初始化一个类的子类
	* java虚拟机启动时被表明为启动类的类(含有main方法)
2. 被动使用，除了以上六种情况，其他使用java类的方式都被看做是对类的被动使用，都不会导致类的初始化
3. 所有的java虚拟机实现必须在每个类或接口被java程序**首次主动使用**时才初始化他们，其他使用java类的方式都被看做是对类的被动使用，都不会导致类的初始化

加载.class文件的方式:
-----------------

* 从本地系统中直接加载
* 通过网络下载.class文件
* 从zip,jar等归档文件中加载.class文件
* 从专有数据库中提取.class文件
* 将java原文件动态编译为.class文件

